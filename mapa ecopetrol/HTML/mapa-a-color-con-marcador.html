<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Set pitch and bearing</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
.popup { animation: fadeIn 0.5s forwards; }
.popup-content { padding: 10px; }
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
</style>
</head>
<body>
<div id="map"></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1Ijoicnl1amluaGlyYWdpIiwiYSI6ImNsc3hkbmdmazAxeTYyaW1jMjZ5ejBwYTgifQ.tXxXC8eIOK7j6g1EXS2lfw';
const map = new mapboxgl.Map({
    container: 'map',
    // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
    style: 'mapbox://styles/mapbox/streets-v12',
    // camera options properties - https://docs.mapbox.com/help/glossary/camera/
    center: [-73.5804, 45.53483],
    pitch: 60, // pitch in degrees
    bearing: -60, // bearing in degrees
    zoom: 10
});

map.on('load', () => {
    map.addSource('marker-source', {
        type: 'geojson',
        data: {
            type: 'FeatureCollection',
            features: []
        }
    });

    map.addLayer({
        id: 'markers',
        type: 'symbol',
        source: 'marker-source',
        layout: {
            'icon-image': 'marker-15', // Mapbox built-in marker icon
            'icon-allow-overlap': true,
        }
    });

    const popup = new mapboxgl.Popup({
        className: 'popup',
        closeButton: false,
        closeOnClick: false
    }).setHTML("<div class='popup-content'><h3>Información del Marcador</h3><p>Aquí puedes agregar información relevante sobre el marcador.</p></div>");

    map.on('click', (e) => {
        const coordinates = e.lngLat;
        
        // Remove previous markers
        map.getSource('marker-source').setData({
            type: 'FeatureCollection',
            features: []
        });

        // Add new marker
        map.getSource('marker-source').setData({
            type: 'FeatureCollection',
            features: [{
                type: 'Feature',
                geometry: {
                    type: 'Point',
                    coordinates: [-75.6115, 6.2311]
                }
            }]
        });

        // Show popup
        popup.setLngLat(coordinates)
            .addTo(map);
    });
});
</script>

</body>
</html>
